--- a/drivers/gpio/gpiolib.c
+++ b/drivers/gpio/gpiolib.c

 @@ -126,7 +126,9 @@
 -       if (WARN(!gpio_is_valid(gpio), "invalid GPIO %d\n", gpio))
 +       if (gpio == -EPROBE_DEFER)
 +               return NULL;
 +       else if (WARN(!gpio_is_valid(gpio), "invalid GPIO %d\n", gpio))
